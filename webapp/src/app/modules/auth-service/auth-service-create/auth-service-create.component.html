<div
  id="collaboratorRegisterProfile"
  class="page"
  fxLayout="column"
  *ngIf="collaboratorProfileForm"
>
  <div class="content-scroll" style="padding-top: 0px">
    <form
      (submit)="next()"
      [formGroup]="collaboratorProfileForm"
      fxLayout="column"
      class="form-control"
    >
      <h1 style="width: 100%">Cadastro de Perfil</h1>
      <div fxFlex="100" fxLayoutGap="16px">
        <mat-form-field
          fxFlex="50"
          class="example-full-width"
          appearance="outline"
        >
          <mat-label>{{ "auth-service-list.name" | translate }}</mat-label>
          <input
            type="text"
            placeholder="Colaborador"
            aria-label="text"
            #filter
            matInput
            [matAutocomplete]="auto"
            [formControl]="collaboratorControl"
          />
          <mat-error
            *ngIf="
              collaboratorControl && collaboratorControl.hasError('required')
            "
          >
            {{ "validators.validator-required" | translate }}
          </mat-error>
          <mat-error
            *ngIf="
              collaboratorControl &&
              !collaboratorControl.hasError('required') &&
              collaboratorControl.hasError('incorrect')
            "
          >
            {{ "validators.select-option" | translate }}
          </mat-error>
          <mat-autocomplete
            autoActiveFirstOption
            #auto="matAutocomplete"
            [displayWith]="displayFn"
          >
            <mat-option
              *ngFor="let collaborator of filteredCollaborators"
              [value]="collaborator"
            >
              {{ collaborator.firstNameCorporateName }}
              {{ collaborator.lastNameFantasyName }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <mat-form-field fxFlex="50" appearance="outline">
          <mat-label>{{ "auth-service-list.email" | translate }}</mat-label>
          <input
            matInput
            formControlName="email"
            placeholder="Email"
            readonly
          />
          <mat-error
            *ngIf="
              collaboratorProfileForm &&
              collaboratorProfileForm.controls['email'].hasError('required')
            "
          >
            {{ "validators.validator-required" | translate }}
          </mat-error>
          <mat-error
            *ngIf="
              collaboratorProfileForm &&
              collaboratorProfileForm.controls['email'].hasError('email')
            "
          >
            {{ "validators.validator-email" | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div fxFlex="100" fxLayoutGap="16px">
        <mat-form-field fxFlex="30" appearance="outline">
          <mat-label>{{ "auth-service-list.ddd" | translate }}</mat-label>
          <input
            type="text"
            placeholder="DDD"
            formControlName="ddd"
            matInput
            mask="(00)"
            readonly
          />
        </mat-form-field>
        <mat-form-field fxFlex="70" appearance="outline">
          <mat-label>{{
            "auth-service-list.phone_number" | translate
          }}</mat-label>
          <input
            matInput
            type="text"
            placeholder="Telefone"
            phoneNumber
            mask="0000-0000 || 00000-0000"
            formControlName="phoneNumber"
            readonly
          />
        </mat-form-field>
      </div>

      <div fxFlex="100" fxLayoutGap="16px">
        <mat-form-field
          fxFlex="50"
          class="example-full-width"
          appearance="outline"
        >
          <mat-label>{{ "auth-service-list.profile" | translate }}</mat-label>
          <input
            type="text"
            placeholder="Perfil"
            aria-label="text"
            #filter
            matInput
            [matAutocomplete]="now"
            [formControl]="profileControl"
          />
          <mat-error
            *ngIf="
            profileControl && profileControl.hasError('required')
            "
          >
            {{ "validators.validator-required" | translate }}
          </mat-error>
          <mat-error
            *ngIf="
            profileControl &&
              !profileControl.hasError('required') &&
              profileControl.hasError('incorrect')
            "
          >
            {{ "validators.select-option" | translate }}
          </mat-error>
          <mat-autocomplete
            autoActiveFirstOption
            #now="matAutocomplete"
            [displayWith]="displayFnProfile"
          >
            <mat-option
              *ngFor="let profile of filteredProfiles"
              [value]="profile"
            >
              {{ profile.name }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <mat-form-field fxFlex="50" appearance="outline">
          <mat-label>{{ "auth-service-list.login" | translate }}</mat-label>
          <input
            matInput
            formControlName="login"
            placeholder="Login"
            readonly
          />
          <mat-error
            *ngIf="
              collaboratorProfileForm &&
              collaboratorProfileForm.controls['login'].hasError('required')
            "
          >
            {{ "validators.validator-required" | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div fxFlex="100" fxLayoutGap="16px">
        <mat-form-field fxFlex="100" appearance="outline">
          <mat-label class="label">{{
            "auth-service-list.password" | translate
          }}</mat-label>
          <input
            matInput
            formControlName="password"
            placeholder="Senha"
            [type]="show ? 'text' : 'password'"
          />
          <mat-icon class="icon" matPrefix (click)="passwordShow()">{{
            show === false ? "visibility_off" : "visibility"
          }}</mat-icon>
          <mat-error
            *ngIf="
              collaboratorProfileForm &&
              collaboratorProfileForm.controls['password'].hasError('required')
            "
          >
            {{ "validators.validator-required" | translate }}
          </mat-error>
        </mat-form-field>
      </div>
    </form>
  </div>
  <div
    class="navigation-buttons"
    fxLayoutAlign="center center"
    fxLayoutGap="16px"
  >
    <button
      mat-button
      class="btn-arrow-back"
      color="primary"
      (click)="onNoClick()"
    >
      <mat-icon>chevron_left</mat-icon>
    </button>
    <button
      mat-flat-button
      [disabled]="
        collaboratorProfileForm.controls['password'].invalid &&
        profileEmpty === true
      "
      color="primary"
      (click)="saveCollaborator()"
      [mat-dialog-close]="true"
    >
      {{ "auth-service-list.button_save" | translate }}
    </button>
  </div>
</div>
